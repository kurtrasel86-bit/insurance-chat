# üåê –í–µ–±-–≤–∏–¥–∂–µ—Ç —á–∞—Ç–∞ - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## –ß—Ç–æ —ç—Ç–æ?

–í–µ–±-–≤–∏–¥–∂–µ—Ç —á–∞—Ç–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç—Ä–∞—Ö–æ–≤–æ–π —á–∞—Ç-–±–æ—Ç –Ω–∞ –ª—é–±–æ–π —Å–∞–π—Ç. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –æ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–∏ –ø—Ä—è–º–æ –Ω–∞ –≤–∞—à–µ–º —Å–∞–π—Ç–µ –±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- **–í—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –≤–∏–¥–∂–µ—Ç** - –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –∫–æ–¥–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- **RAG –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —É–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
- **–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è** - –∫–Ω–æ–ø–∫–∏ –¥–ª—è —á–∞—Å—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–ø–∏—Å–∏ –≥–æ–ª–æ—Å–∞ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

### üîÑ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:
- –ü–µ—Ä–µ–¥–∞—á–∞ —á–∞—Ç–∞ –∞–≥–µ–Ω—Ç—É
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å polis.online
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –ø–æ–ª–∏—Å–æ–≤

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```powershell
cd backend
npm run start:dev
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–µ–º–æ-—Å—Ç—Ä–∞–Ω–∏—Ü—É

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:3000/web/demo

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤–∏–¥–∂–µ—Ç

–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —á–∞—Ç–∞ –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã:
- "–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞?"
- "–ù—É–∂–Ω–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞"
- "–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è"

## –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –Ω–∞ —Å–∞–π—Ç

### –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –≤ `<head>` –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞:

```html
<script src="http://localhost:3000/web/widget"></script>
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ URL

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏–∑–º–µ–Ω–∏—Ç–µ URL –≤ `.env`:

```env
WEB_BASE_URL=https://your-domain.com
```

–¢–æ–≥–¥–∞ —Å–∫—Ä–∏–ø—Ç –±—É–¥–µ—Ç:

```html
<script src="https://your-domain.com/web/widget"></script>
```

## API Endpoints

### –í–µ–±-—á–∞—Ç

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | `/web` | –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —á–∞—Ç |
| GET | `/web/demo` | –î–µ–º–æ-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –≤–∏–¥–∂–µ—Ç–æ–º |
| GET | `/web/widget` | JavaScript –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è |
| POST | `/web/chat` | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è |
| GET | `/web/messages/:sessionId` | –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π |
| POST | `/web/search` | –ü–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π |
| GET | `/web/products` | –°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ |
| POST | `/web/request-agent` | –ó–∞–ø—Ä–æ—Å –∞–≥–µ–Ω—Ç–∞ |

### AI

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| POST | `/ai/generate` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ AI |

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### JavaScript API

```javascript
// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
const response = await fetch('/web/chat', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    sessionId: 'session-id',
    message: '–°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞?'
  })
});

const data = await response.json();
console.log(data.reply); // –û—Ç–≤–µ—Ç AI
```

### –ü–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π

```javascript
const searchResults = await fetch('/web/search', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    query: '—Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞',
    companyCode: 'PICC',
    limit: 5
  })
});
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

```javascript
const products = await fetch('/web/products?companyCode=PICC');
const data = await products.json();
console.log(data); // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –∫–æ–º–ø–∞–Ω–∏—è–º –ø—Ä–æ–¥—É–∫—Ç—ã
```

## –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞

–í–∏–¥–∂–µ—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ JavaScript. –í—ã –º–æ–∂–µ—Ç–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∏–ª–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏:

```javascript
// –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–∂–µ—Ç–∞
const chatButton = document.getElementById('insurance-chat-button');
const chatFrame = document.getElementById('insurance-chat-frame');

// –ò–∑–º–µ–Ω–∏—Ç—å —Ü–≤–µ—Ç –∫–Ω–æ–ø–∫–∏
chatButton.style.background = 'linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)';

// –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä —á–∞—Ç–∞
chatFrame.style.width = '500px';
chatFrame.style.height = '700px';
```

### –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

```javascript
// –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –∫–Ω–æ–ø–∫–∏
chatButton.style.bottom = '30px';
chatButton.style.left = '30px'; // –≤–º–µ—Å—Ç–æ right
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π

### Google Analytics

```javascript
// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è —á–∞—Ç–∞
chatButton.addEventListener('click', () => {
  gtag('event', 'chat_opened', {
    event_category: 'engagement',
    event_label: 'insurance_chat'
  });
});
```

### –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞

```javascript
// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
function trackMessage(message) {
  ym(12345678, 'reachGoal', 'chat_message_sent', {
    message_length: message.length
  });
}
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–í `main.ts` –¥–æ–±–∞–≤—å—Ç–µ CORS –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤:

```typescript
app.enableCors({
  origin: ['https://your-domain.com', 'https://another-domain.com'],
  credentials: true
});
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–µ—Å—Å–∏–π

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å `sessionId`. –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è.

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

```html
<!-- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–∂–µ—Ç–∞ -->
<script>
  (function() {
    const script = document.createElement('script');
    script.src = 'http://localhost:3000/web/widget';
    script.async = true;
    document.head.appendChild(script);
  })();
</script>
```

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∫–µ—à–∏—Ä—É—é—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º. –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞ –∏–∑–º–µ–Ω–∏—Ç–µ –≤–µ—Ä—Å–∏—é:

```html
<script src="http://localhost:3000/web/widget?v=2.0"></script>
```

## –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

–í–∏–¥–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:

- –ù–∞ —ç–∫—Ä–∞–Ω–∞—Ö < 480px —á–∞—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
- –ö–Ω–æ–ø–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç—Å—è –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è
- –¢–µ–∫—Å—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

## Troubleshooting

### –í–∏–¥–∂–µ—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ CORS
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

### –ß–∞—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ (`npm run prisma:seed`)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

### –û—à–∏–±–∫–∏ CORS

–î–æ–±–∞–≤—å—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω –≤ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–∫—Å–∏.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```powershell
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
npm run start:dev

# –û—Ç–∫—Ä—ã—Ç—å –¥–µ–º–æ
start http://localhost:3000/web/demo
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞

```powershell
# –¢–µ—Å—Ç API
curl -X POST http://localhost:3000/web/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "–ü—Ä–∏–≤–µ—Ç", "sessionId": "test"}'
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **Handover —Å–∏—Å—Ç–µ–º–∞** - –ø–µ—Ä–µ–¥–∞—á–∞ —á–∞—Ç–∞ –∞–≥–µ–Ω—Ç—É
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è polis.online** - –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–æ–ª–∏—Å–æ–≤
3. **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
4. **WhatsApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –º—É–ª—å—Ç–∏–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
5. **PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ª–∏—Å—ã

---

**–°–æ–∑–¥–∞–Ω–æ:** 1 –æ–∫—Ç—è–±—Ä—è 2025  
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** NestJS, HTML5, CSS3, JavaScript, RAG, OpenAI
