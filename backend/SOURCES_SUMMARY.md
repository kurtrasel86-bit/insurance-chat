# ‚úÖ –ú–û–î–£–õ–¨ "–ò–°–¢–û–ß–ù–ò–ö–ò" –°–û–ó–î–ê–ù!

## üéØ –ß–¢–û –ì–û–¢–û–í–û:

### 1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** ‚úÖ
```prisma
model Source {
  id             String   @id
  name           String   // "–ü—Ä–∞–≤–∏–ª–∞ –û–°–ê–ì–û –°–û–ì–ê–ó"
  url            String   // https://sogaz.ru/rules.pdf
  type           String   // pdf, webpage, news
  companyCode    String?
  productCode    String?
  checkFrequency String   // manual, daily, weekly
  lastChecked    DateTime?
  contentHash    String?  // –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
  changes        SourceChange[]
}

model SourceChange {
  id          String   @id
  sourceId    String
  changeType  String   // pdf_updated, new_article, content_updated
  description String
  oldContent  String?
  newContent  String?
  status      String   // pending, approved, rejected
}
```

### 2. **API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã** ‚úÖ
```
POST   /sources                      - –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫
GET    /sources                      - –°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
DELETE /sources/:id                  - –£–¥–∞–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫
PUT    /sources/:id                  - –û–±–Ω–æ–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫

POST   /sources/check-all            - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
POST   /sources/:id/check            - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫

GET    /sources/changes/pending      - –û–∂–∏–¥–∞—é—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
POST   /sources/changes/:id/approve  - –û–¥–æ–±—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ
POST   /sources/changes/:id/reject   - –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ
```

### 3. **–£–º–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π** ‚úÖ

#### PDF —Ñ–∞–π–ª—ã:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç Last-Modified header
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ - –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–∫–∞—á–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é

#### –ù–æ–≤–æ—Å—Ç–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
- –ü–∞—Ä—Å–∏—Ç —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π
- –ù–∞—Ö–æ–¥–∏—Ç –Ω–æ–≤—ã–µ —Å—Ç–∞—Ç—å–∏ (–∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –±—ã–ª–æ —Ä–∞–Ω—å—à–µ)
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ –ë–î

#### –í–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã:
- –°–æ–∑–¥–∞—ë—Ç hash —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
- –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### 4. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)
```
/admin/sources              - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
```

## üöÄ –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:

### 1. –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫:

**API:**
```bash
curl -X POST http://localhost:3000/sources \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–ü—Ä–∞–≤–∏–ª–∞ –û–°–ê–ì–û 2024 –°–û–ì–ê–ó",
    "url": "https://www.sogaz.ru/upload/iblock/osago_rules_2024.pdf",
    "type": "pdf",
    "companyCode": "SOGAZ",
    "productCode": "OSAGO",
    "checkFrequency": "daily"
  }'
```

**PowerShell:**
```powershell
$source = @{
    name = "–ü—Ä–∞–≤–∏–ª–∞ –û–°–ê–ì–û 2024 –°–û–ì–ê–ó"
    url = "https://www.sogaz.ru/osago/rules.pdf"
    type = "pdf"
    companyCode = "SOGAZ"
    productCode = "OSAGO"
    checkFrequency = "daily"
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:3000/sources" `
    -Method POST -Body $source -ContentType "application/json"
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ
curl -X POST http://localhost:3000/sources/check-all

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–¥–∏–Ω
curl -X POST http://localhost:3000/sources/{id}/check
```

### 3. –ü–æ–ª—É—á–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
curl http://localhost:3000/sources/changes/pending
```

### 4. –û–¥–æ–±—Ä–∏—Ç—å/–û—Ç–∫–ª–æ–Ω–∏—Ç—å:

```bash
# –û–¥–æ–±—Ä–∏—Ç—å
curl -X POST http://localhost:3000/sources/changes/{id}/approve

# –û—Ç–∫–ª–æ–Ω–∏—Ç—å
curl -X POST http://localhost:3000/sources/changes/{id}/reject
```

## üìã –°–¶–ï–ù–ê–†–ò–ô –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø:

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏
```
1. –î–æ–±–∞–≤–ª—è–µ—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ PDF —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –û–°–ê–ì–û
2. –î–æ–±–∞–≤–ª—è–µ—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–æ–≤–æ—Å—Ç–µ–π –∫–æ–º–ø–∞–Ω–∏–∏
3. –î–æ–±–∞–≤–ª—è–µ—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ç–∞—Ä–∏—Ñ–∞–º–∏
```

### –®–∞–≥ 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```
–°–∏—Å—Ç–µ–º–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ (–∏–ª–∏ –ø–æ –∫–Ω–æ–ø–∫–µ):
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
2. –ù–∞—Ö–æ–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –°–æ–∑–¥–∞—ë—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

### –®–∞–≥ 3: –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```
–í—ã –≤–∏–¥–∏—Ç–µ:
‚ö†Ô∏è –û–∂–∏–¥–∞—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ (2)

1. PDF –æ–±–Ω–æ–≤–ª—ë–Ω: "–ü—Ä–∞–≤–∏–ª–∞ –û–°–ê–ì–û 2024"
   –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å—Å—ã–ª–∫–µ
   [‚úÖ –û–¥–æ–±—Ä–∏—Ç—å] [‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å]

2. –ù–æ–≤–∞—è —Å—Ç–∞—Ç—å—è: "–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–∞—Ä–∏—Ñ–∞—Ö —Å 1 –æ–∫—Ç—è–±—Ä—è"
   –°—Å—ã–ª–∫–∞: https://...
   –ü—Ä–µ–≤—å—é: "–° 1 –æ–∫—Ç—è–±—Ä—è 2024 –≥–æ–¥–∞..."
   [‚úÖ –û–¥–æ–±—Ä–∏—Ç—å] [‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å]
```

### –®–∞–≥ 4: –û–¥–æ–±—Ä–µ–Ω–∏–µ
```
–ù–∞–∂–∏–º–∞–µ—Ç–µ: [‚úÖ –û–¥–æ–±—Ä–∏—Ç—å]

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- PDF –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è
- –¢–µ–∫—Å—Ç –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è
- –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
- –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –∑–∞–º–µ–Ω—è–µ—Ç—Å—è
```

## üí° –ü–†–ò–ú–ï–†–´ –ò–°–¢–û–ß–ù–ò–ö–û–í:

### PDF –ø—Ä–∞–≤–∏–ª–∞:
```json
{
  "name": "–ü—Ä–∞–≤–∏–ª–∞ –û–°–ê–ì–û –°–û–ì–ê–ó 2024",
  "url": "https://www.sogaz.ru/rules/osago_2024.pdf",
  "type": "pdf",
  "companyCode": "SOGAZ",
  "productCode": "OSAGO"
}
```

### –ù–æ–≤–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏:
```json
{
  "name": "–ù–æ–≤–æ—Å—Ç–∏ –ò–Ω–≥–æ—Å—Å—Ç—Ä–∞—Ö",
  "url": "https://www.ingos.ru/news/",
  "type": "news",
  "companyCode": "INGOSSTRAH"
}
```

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ç–∞—Ä–∏—Ñ–∞–º–∏:
```json
{
  "name": "–¢–∞—Ä–∏—Ñ—ã –ö–ê–°–ö–û –¢–∏–Ω—å–∫–æ—Ñ—Ñ",
  "url": "https://www.tinkoff.ru/insurance/kasko/tariffs/",
  "type": "webpage",
  "companyCode": "TINKOFF",
  "productCode": "KASKO"
}
```

## ‚ú® –û–°–û–ë–ï–ù–ù–û–°–¢–ò:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ** - —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. **–†—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** - –≤—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç–µ —á—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è
3. **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏
4. **–ü–∞—Ä—Å–∏–Ω–≥ –Ω–æ–≤–æ—Å—Ç–µ–π** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ —Å—Ç–∞—Ç–µ–π
5. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** - hash-based detection

## üéâ –ì–û–¢–û–í–û!

–ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–û—Å—Ç–∞–ª–æ—Å—å:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
5. –û–¥–æ–±—Ä–∏—Ç—å –Ω—É–∂–Ω—ã–µ

**–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ –≤—Å—ë –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç!** üöÄ

