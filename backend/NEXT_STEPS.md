# üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏: –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ:

1. **–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö** - —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
2. **–ü—Ä–æ—Å—Ç–æ–π –≤–µ–±-—Å–∫—Ä–∞–ø–µ—Ä** - —Å–æ–∑–¥–∞—ë—Ç –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ ‚úÖ  
3. **API –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** - –≥–æ—Ç–æ–≤ ‚úÖ
4. **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç ‚úÖ

## üìä –ü—Ä–æ–±–ª–µ–º–∞:

–í—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–º–µ—Ç–∏–ª–∏ - —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º–∏ –∏–ª–∏ –Ω–µ–ø–æ–ª–Ω—ã–º–∏, —Ç–∞–∫ –∫–∞–∫:
- –í–µ–±-—Å–∫—Ä–∞–ø–∏–Ω–≥ –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑-–∑–∞ –∑–∞—â–∏—Ç—ã —Å–∞–π—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ - —ç—Ç–æ –∑–∞–≥–ª—É—à–∫–∏
- –ù–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –∏ —É—Å–ª–æ–≤–∏–π —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è

## üéØ –†–µ—à–µ–Ω–∏–µ: –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

#### 1. **–ó–∞–≥—Ä—É–∑–∫–∞ PDF/DOCX —Ñ–∞–π–ª–æ–≤** üìÅ
```
/admin/files/upload
‚Üì
–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª ‚Üí –£–∫–∞–∑–∞—Ç—å –∫–æ–º–ø–∞–Ω–∏—é/–ø—Ä–æ–¥—É–∫—Ç ‚Üí –ó–∞–≥—Ä—É–∑–∏—Ç—å
```

#### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑** üîç
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ PDF/DOCX
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–ø—Ä–∞–≤–∏–ª–∞, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, —É—Å–ª–æ–≤–∏—è)
- –ü–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (—Å—Ö–æ–∂–µ—Å—Ç—å > 80%)
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π (—Ä–∞–∑–Ω—ã–µ —Ü–µ–Ω—ã, —É—Å–ª–æ–≤–∏—è)

#### 3. **–†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** ‚úã
```
–ù–∞–π–¥–µ–Ω–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤: 1
  "–ü—Ä–∞–≤–∏–ª–∞ –û–°–ê–ì–û 2023.pdf" ‚Üí —Å—Ö–æ–∂–µ—Å—Ç—å 85%
  [ –ó–∞–º–µ–Ω–∏—Ç—å ] [ –û—Å—Ç–∞–≤–∏—Ç—å –æ–±–∞ ] [ –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å ]

–ù–∞–π–¥–µ–Ω–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤: 2
  –°—Ç–æ–∏–º–æ—Å—Ç—å: 2000-15000‚ÇΩ vs 1800-12000‚ÇΩ
  [ –ü—Ä–∏–Ω—è—Ç—å –Ω–æ–≤–æ–µ ] [ –û—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–∞—Ä–æ–µ ]
```

#### 4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π** üíæ
- –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç—ã KB
- –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Üí —É–¥–∞–ª—è—é—Ç—Å—è –∏–ª–∏ –∞—Ä—Ö–∏–≤–∏—Ä—É—é—Ç—Å—è
- –ù–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Üí –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤:

```powershell
cd insurance-chat\backend
npm install multer @types/multer pdf-parse mammoth @types/pdf-parse
```

## üèóÔ∏è –ß—Ç–æ —Å–æ–∑–¥–∞–¥–∏–º:

### 1. –ú–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
```
src/modules/file-upload/
‚îú‚îÄ‚îÄ file-upload.module.ts
‚îú‚îÄ‚îÄ file-upload.controller.ts
‚îú‚îÄ‚îÄ file-upload.service.ts
‚îî‚îÄ‚îÄ services/
    ‚îú‚îÄ‚îÄ file-parser.service.ts         # PDF/DOCX ‚Üí —Ç–µ–∫—Å—Ç
    ‚îú‚îÄ‚îÄ duplicate-detector.service.ts   # –ü–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
    ‚îî‚îÄ‚îÄ conflict-resolver.service.ts    # –ü–æ–∏—Å–∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
```

### 2. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ë–î (schema.prisma)
```prisma
model UploadedFile {
  id            String   @id @default(uuid())
  filename      String
  companyCode   String
  productCode   String
  status        String   // pending, approved, rejected
  extractedText String?
  duplicates    DuplicateCheck[]
  conflicts     ConflictCheck[]
  ...
}
```

### 3. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
```
POST   /files/upload                      # –ó–∞–≥—Ä—É–∑–∏—Ç—å
GET    /files                             # –°–ø–∏—Å–æ–∫  
GET    /files/:id/duplicates              # –î—É–±–ª–∏–∫–∞—Ç—ã
POST   /files/:id/duplicates/:dupId/resolve  # –†–∞–∑—Ä–µ—à–∏—Ç—å
POST   /files/:id/approve                 # –û–¥–æ–±—Ä–∏—Ç—å
```

### 4. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```
/admin/files           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏
/admin/files/upload    # –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏
/admin/files/:id/review # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–¥–æ–±—Ä–µ–Ω–∏–µ
```

## üé¨ –°—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∫–∞
```
1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ /admin/files/upload
2. –í—ã–±–∏—Ä–∞–µ—Ç–µ PDF: "–ü—Ä–∞–≤–∏–ª–∞_–û–°–ê–ì–û_2024_–°–û–ì–ê–ó.pdf"
3. –£–∫–∞–∑—ã–≤–∞–µ—Ç–µ: –ö–æ–º–ø–∞–Ω–∏—è=–°–û–ì–ê–ó, –ü—Ä–æ–¥—É–∫—Ç=–û–°–ê–ì–û
4. –ù–∞–∂–∏–º–∞–µ—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å"
```

### –®–∞–≥ 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
```
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
‚úì –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ PDF
‚úì –ò—â–µ—Ç –ø–æ—Ö–æ–∂–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
‚úì –ù–∞—Ö–æ–¥–∏—Ç: "–ü—Ä–∞–≤–∏–ª–∞ –û–°–ê–ì–û 2023 –°–û–ì–ê–ó" (—Å—Ö–æ–∂–µ—Å—Ç—å 85%)
‚úì –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç: —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
```

### –®–∞–≥ 3: –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```
–í—ã –≤–∏–¥–∏—Ç–µ:
üìÑ –ü—Ä–∞–≤–∏–ª–∞ –û–°–ê–ì–û 2024 –°–û–ì–ê–ó.pdf
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üîç –ù–∞–π–¥–µ–Ω –¥—É–±–ª–∏–∫–∞—Ç:
  "–ü—Ä–∞–≤–∏–ª–∞ –û–°–ê–ì–û 2023 –°–û–ì–ê–ó"
  [ ‚úì –ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–π –¥–æ–∫—É–º–µ–Ω—Ç ]
  [ –û—Å—Ç–∞–≤–∏—Ç—å –æ–±–∞ ]
  [ –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å ]

‚ö†Ô∏è –ù–∞–π–¥–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç:
  –°—Ç–æ–∏–º–æ—Å—Ç—å –û–°–ê–ì–û –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
  –ù–æ–≤–æ–µ: 2500-16000‚ÇΩ
  –°—Ç–∞—Ä–æ–µ: 2000-15000‚ÇΩ
  [ ‚úì –ü—Ä–∏–Ω—è—Ç—å –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ]
  [ –û—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–∞—Ä–æ–µ ]
```

### –®–∞–≥ 4: –û–¥–æ–±—Ä–µ–Ω–∏–µ
```
–ù–∞–∂–∏–º–∞–µ—Ç–µ: [ –û–¥–æ–±—Ä–∏—Ç—å –≤—Å—ë ]

–†–µ–∑—É–ª—å—Ç–∞—Ç:
‚úì –°—Ç–∞—Ä—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —É–¥–∞–ª—ë–Ω
‚úì –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ KB
‚úì –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω–∞
‚úì –ê–≥–µ–Ω—Ç —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞
```

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

1. ‚úÖ **–¢–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –∑–∞–≥—Ä—É–∂–∞–µ—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
2. ‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞** - —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º
3. ‚úÖ **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ
4. ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –Ω–∏–∫–∞–∫–∏—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ –±–∞–∑–µ
5. ‚úÖ **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:

- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤: 2 –º–∏–Ω
- –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è: –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥
- –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î: 1 –º–∏–Ω
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 5 –º–∏–Ω

**–í—Å–µ–≥–æ: ~10 –º–∏–Ω—É—Ç –¥–ª—è –±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏**

## üöÄ –ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å?

–•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è:
1. –£—Å—Ç–∞–Ω–æ–≤–∏–ª –ø–∞–∫–µ—Ç—ã
2. –°–æ–∑–¥–∞–ª –º–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
3. –î–æ–±–∞–≤–∏–ª —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
4. –°–¥–µ–ª–∞–ª –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏

–ò –≤—ã —Å–º–æ–∂–µ—Ç–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å PDF/DOCX —Ñ–∞–π–ª—ã —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –ø—Ä—è–º–æ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å!

